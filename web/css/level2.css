/* Base Styles - Inheriting dark cyberpunk vibe */
body {
    background-color: #050505;
    color: #e0e0e0;
    font-family: 'Roboto Mono', monospace;
    margin: 0;
    padding: 0;
    overflow: hidden;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}

.game-container {
    width: 100%;
    max-width: 1200px;
    height: 100%;
    padding: 2rem;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    position: relative;
    background: radial-gradient(circle at center, #1a1a1a 0%, #000000 100%);
    z-index: 1;
}

/* Background Overlay for Tunnel Vision Logic */
.tunnel-vision-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at center, transparent 20%, #000 90%);
    pointer-events: none;
    z-index: 5;
    opacity: 0;
    transition: opacity 1s ease;
}

body.considering-money .tunnel-vision-overlay {
    opacity: 1;
}

/* HUD */
.hud {
    display: flex;
    justify-content: space-between;
    padding-bottom: 2rem;
    border-bottom: 1px solid #333;
    z-index: 2;
}

.status-item .label {
    color: #888;
    margin-right: 0.5rem;
}

.status-item .value {
    font-weight: 700;
    font-size: 1.2rem;
    color: #fff;
}

.value.critical {
    color: #ff0000;
    animation: panic-pulse 0.5s infinite;
}

/* Narrative */
.narrative-box {
    margin-top: 2rem;
    text-align: center;
    margin-bottom: 2rem;
    z-index: 2;
}

.chapter-title {
    color: #ffd700;
    /* Gold for opportunity/temptation */
    font-family: 'Orbitron', sans-serif;
    letter-spacing: 2px;
}

.offer-highlight {
    display: block;
    margin-top: 10px;
    color: #00ff00;
    font-weight: bold;
    font-size: 1.2rem;
    text-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
}

/* Briefcase Scene - Radioactive Temptation */
.briefcase-scene {
    flex-grow: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    z-index: 2;
}

.briefcase-container {
    width: 300px;
    height: 200px;
    background: #2a2a2a;
    border-radius: 5px;
    position: relative;
    border: 1px solid #444;
    transition: all 0.5s ease;

    /* Core Effect: Radioactive Glow */
    filter: drop-shadow(0 0 15px rgba(0, 255, 0, 0.4));
    animation: money-pulse 2s infinite ease-in-out;
}

/* Shake animation triggered by JS */
.briefcase-container.shake {
    animation: shake 0.5s cubic-bezier(.36, .07, .19, .97) both;
}

.briefcase-body {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    color: #0f0;
    font-size: 3rem;
    overflow: hidden;
}

.briefcase-body::before {
    content: '$';
    font-family: 'Orbitron', sans-serif;
    opacity: 0.2;
}

/* Leaking Guilt: Newspaper Cover */
.newspaper-cover {
    position: absolute;
    top: -20px;
    left: -10px;
    width: 110%;
    height: 110%;
    z-index: 3;
    background: #ccc;
    color: #000;
    padding: 10px;
    transform: rotate(-2deg);
    box-shadow: 0 10px 40px -5px rgba(0, 255, 0, 0.8);
    /* Leaking light */
    transition: top 0.5s ease;
}

/* Newspaper Flutter Animation */
.newspaper-cover.flutter {
    transition: transform 0.1s;
    transform-origin: top center;
    animation: paper-flutter 4s infinite ease-in-out;
}

.newspaper-cover.hidden {
    display: none;
}

/* Green light bleeding from bottom of newspaper */
.newspaper-cover::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 30%;
    background: linear-gradient(to top, rgba(0, 255, 0, 0.5), transparent);
    pointer-events: none;
}

/* Dynamic Leaking Glow */
.briefcase-glow-leak {
    /* Helper class to be toggled or styled if we separated the glow, 
        but we are using box-shadow on newspaper for simplicity in previous step. 
        Let's enhance it here. */
}

/* Choices */
.choices-container {
    display: flex;
    gap: 2rem;
    justify-content: center;
    margin-bottom: 3rem;
    z-index: 6;
    /* High z-index to stay above tunnel vision */
}

.choice-btn {
    padding: 1.5rem 2rem;
    border: 1px solid #555;
    background: rgba(0, 0, 0, 0.8);
    color: #fff;
    cursor: pointer;
    text-align: center;
    transition: all 0.3s;
    font-family: 'Orbitron', sans-serif;
    min-width: 250px;
}

.choice-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: translateY(-3px);
}

.choice-btn .sub-text {
    display: block;
    margin-top: 5px;
    font-size: 0.8rem;
    font-family: 'Roboto Mono', monospace;
    color: #888;
}

/* Consider Choice Hover Effect */
.choice-consider:hover {
    border-color: #00ff00;
    box-shadow: 0 0 20px rgba(0, 255, 0, 0.2);
}

/* Refuse Choice Hover */
#btn-refuse:hover {
    border-color: #ff0000;
}

/* Event 2: Innocent Overlay (Contrast + Enhancements) */
#overlay-innocent {
    background: rgba(0, 0, 0, 0.6);
    /* Reduced opacity on base bg to let vignette take over */
    /* backdrop-filter: blur(5px); Removed base blur to control it via class */
}

/* Guilt Vision Vignette */
.guilt-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle, transparent 40%, rgba(50, 0, 0, 0.9) 90%);
    /* Dark Red corners */
    pointer-events: none;
    /**/
    animation: breathing-panic 3s infinite ease-in-out;
    z-index: 9;
    /* Behind content but in front of game world */
}

.innocent-scene {
    position: relative;
    z-index: 10;
    /* Above vignette */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    width: 70%;
    text-align: center;
}

.character-wrapper {
    position: relative;
    margin-bottom: 1rem;
}

.couple-visual {
    font-size: 5rem;
    text-shadow: 0 0 20px #fff4e0;
}

/* Stare Interaction - Eyes */
.wife-eyes {
    font-size: 4rem;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    /* Hidden normally, or subtle */
    transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.5s;
    pointer-events: none;
}

/* Trigger Eye Zoom when hovering 'Lie' button using sibling selector logic requires careful structure 
   or JS. CSS only works if btn is after eyes in DOM. which it is. 
   BUT standard CSS sibling combinator ~ selects following siblings.
   .btn-lie is inside .interaction-area, which is a sibling of .character-wrapper.
   We need :has() or JS for full control, but let's try strict path if supported or use JS.
   We'll use JS in level2.js to add class to body/wrapper for robustness.
   Here is the visual style assuming class added: */

.character-wrapper.staring .wife-eyes {
    opacity: 1;
    transform: scale(2.5);
    /* Massive zoom */
    filter: drop-shadow(0 0 10px rgba(255, 0, 0, 0.5));
    /* Demonic/Accusing tint */
}

.character-wrapper.staring .couple-visual {
    opacity: 0.2;
    /* Fade out body to focus on eyes */
}


/* Innocent Speech Bubble */
.speech-bubble {
    background: #fff;
    color: #333;
    padding: 2rem;
    border-radius: 20px;
    position: relative;
    font-family: 'Patrick Hand', sans-serif;
    font-size: 1.3rem;
    line-height: 1.6;
    box-shadow: 0 0 30px rgba(255, 244, 224, 0.6);
    border: 2px solid #fff4e0;
    max-width: 600px;
    cursor: default;
}

.speech-bubble::after {
    content: '';
    position: absolute;
    bottom: -15px;
    left: 50%;
    transform: translateX(-50%);
    border-width: 15px 15px 0;
    border-style: solid;
    border-color: #fff transparent;
    display: block;
    width: 0;
}

/* Irony Highlights */
.innocent-text .keyword {
    font-weight: bold;
    color: #2c3e50;
    /* Base color before reveal */
    display: inline-block;
}

.keyword-safe {
    /* Triggered via class addition in JS for timing control */
}

.keyword-safe.reveal {
    animation: truth-reveal 3s forwards;
}

.keyword-fire.reveal {
    animation: truth-reveal-fire 3s forwards;
}

.interaction-area {
    margin-top: 2rem;
}

.internal-monologue {
    color: #ccc;
    font-style: italic;
    margin-bottom: 0.5rem;
}

.challenge-text {
    color: #e74c3c;
    font-weight: bold;
    margin-bottom: 1.5rem;
}

.btn-lie {
    background: #333;
    color: #aaa;
    border: 1px solid #555;
    padding: 15px 30px;
    font-family: 'Orbitron', sans-serif;
    cursor: grab;
    /* The struggle cursor */
    font-size: 1.1rem;
    transition: all 0.2s;
}

.btn-lie:hover {
    background: #222;
    color: #fff;
    box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
    /* Note: "Lag" cursor is simulated via JS or just CSS quirk, 'wait' or custom */
    cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><circle cx="16" cy="16" r="10" fill="red" opacity="0.5"/></svg>') 16 16, progress;
}

.btn-lie:active {
    cursor: grabbing;
}


/* Animations */
@keyframes money-pulse {
    0% {
        filter: drop-shadow(0 0 10px rgba(0, 255, 0, 0.2));
    }

    50% {
        filter: drop-shadow(0 0 40px rgba(0, 255, 0, 0.8));
    }

    100% {
        filter: drop-shadow(0 0 10px rgba(0, 255, 0, 0.2));
    }
}

@keyframes panic-pulse {
    0% {
        transform: scale(1);
        text-shadow: 0 0 10px red;
    }

    50% {
        transform: scale(1.1);
        text-shadow: 0 0 30px red;
    }

    100% {
        transform: scale(1);
        text-shadow: 0 0 10px red;
    }
}

@keyframes shake {

    10%,
    90% {
        transform: translate3d(-1px, 0, 0);
    }

    20%,
    80% {
        transform: translate3d(2px, 0, 0);
    }

    30%,
    50%,
    70% {
        transform: translate3d(-4px, 0, 0);
    }

    40%,
    60% {
        transform: translate3d(4px, 0, 0);
    }
}

@keyframes breathing-panic {
    0% {
        transform: scale(1);
        opacity: 0.8;
    }

    50% {
        transform: scale(1.05);
        opacity: 1;
    }

    100% {
        transform: scale(1);
        opacity: 0.8;
    }
}

@keyframes truth-reveal {
    0% {
        color: #2c3e50;
    }

    100% {
        color: #ff3333;
        text-shadow: 1px 1px 0px #000;
        transform: rotate(2deg);
        text-decoration: line-through;
    }
}

@keyframes truth-reveal-fire {
    0% {
        color: #666;
    }

    100% {
        color: #ff5722;
        text-shadow: 0 0 5px orange;
        font-weight: 900;
    }
}

@keyframes paper-flutter {

    0%,
    100% {
        transform: rotate(-2deg);
    }

    50% {
        transform: rotate(-1deg) translateY(-3px);
    }
}

.overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    z-index: 100;
    display: flex;
    justify-content: center;
    align-items: center;
}

.overlay.hidden {
    display: none;
}

.terminal-screen {
    font-family: 'Courier New', monospace;
    color: #00ff00;
    text-align: center;
}

.game-over-text {
    font-size: 5rem;
    color: #ff0000;
    margin: 1rem 0;
    text-shadow: 0 0 20px red;
}